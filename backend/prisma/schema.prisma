// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model SensorLog {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  deviceId    String   @map("device_id") // Mapping ke JSON "device_id"
  
  // Data Lingkungan (Float karena ada koma)
  lux         Float
  temperature Float
  humidity    Float
  
  // Data Sensor Raw (Int karena bilangan bulat dari Arduino)
  mq2_adc     Int      // JSON: "mq2_adc"
  sound       Int      // JSON: "sound" (0 atau 1)
  vibration   Int      // JSON: "vibration" (0 atau 1)
  uv          Int      // JSON: "uv" (0 atau 1)
  
  // Metrik Performa Jaringan
  latency     Float    @map("latency_ms") // Mapping ke JSON "latency_ms"
  
  // Waktu
  timestamp   DateTime // Waktu AKURAT dari sensor (hasil koreksi RTT)
  createdAt   DateTime @default(now()) // Waktu masuk ke Database (untuk audit)

  @@map("sensorLog")
}